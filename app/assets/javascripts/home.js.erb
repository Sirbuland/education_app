$(document).ready(function() {
  var checked_items = [];
	
	// Setting of multiselect. Bootstrap multiselect gem is used
  $('.multiselect-search').multiselect({
    enableFiltering: true,
    maxHeight: 250,
    filterPlaceholder: 'Search for something...',
    enableCaseInsensitiveFiltering: true,
    onChange: function(element, checked) {
      var element_text = element[0].text
      if(checked) {
        checked_items.push(element_text);
      } 
      else {
        checked_items = checked_items.filter(function(value, index, arr){
          return value != element_text;
        });
      }
      create_tags(checked_items);
    }
  });

  function create_tags(items) {
    $('.selected-tagg').html('')
    var html = "";
    
    $.each(items, function(value, item){
      
      html += '<span class="label label-info mr-1">'+ item
      html += '<button class="remove-lang" aria-label="Close" type="button" >'
      html += '</button></span>'  
    });
    $('.selected-tagg').append(html);
  }

  $('#pending-applications').dataTable({
    sPaginationType: "full_numbers",
    bJQueryUI: true,
    bProcessing: true,
    bServerSide: true,
    aoColumnDefs: [
    	{ "targets": [0], "searchable": true, "orderable": false, "visible": true, name: 'id' },
      { "targets": [1], "searchable": true, "orderable": false, "visible": true, name: 'name' },
      { "targets": [2], "searchable": true, "orderable": false, "visible": true, name: 'country' },
      { "targets": [3], "searchable": true, "orderable": false, "visible": true, name: 'email' },
      { "targets": [4], "searchable": true, "orderable": false, "visible": true, name: 'qualification' },
      { "targets": [5], "searchable": true, "orderable": false, "visible": true, name: 'occupation' },
      { "targets": [6], "searchable": false, "orderable": false, "visible": true, name: 'join_date' },
      { "targets": [7], "searchable": false, "orderable": false, "visible": true, name: 'join_date' }
    ],
    sAjaxSource: $('#products').data('source')
  })

  

  $('#packages-table').dataTable({
    sPaginationType: "full_numbers",
    bJQueryUI: true,
    bProcessing: true,
    bServerSide: true,
    aoColumnDefs: [
      { "targets": [0], "searchable": true, "orderable": false, "visible": true, name: 'name' },
      { "targets": [1], "searchable": true, "orderable": false, "visible": true, name: 'price' },
      { "targets": [2], "searchable": true, "orderable": false, "visible": true, name: 'total_characters' },
      { "targets": [3], "searchable": true, "orderable": false, "visible": true, name: 'total_credits' },
      { "targets": [4], "searchable": true, "orderable": false, "visible": true, name: 'bonus' },
      { "targets": [5], "searchable": true, "orderable": false, "visible": true, name: 'created_date' }
    ],
    sAjaxSource: $('#products').data('source')
  })
$('#categories-table').dataTable({
    sPaginationType: "full_numbers",
    bJQueryUI: true,
    bProcessing: true,
    bServerSide: true,
    aoColumnDefs: [
      { "targets": [0], "searchable": true, "orderable": false, "visible": true, name: 'name' },
      { "targets": [1], "searchable": true, "orderable": false, "visible": true, name: 'description' },
      { "targets": [2], "searchable": true, "orderable": false, "visible": true, name: 'created_at' }
    ],
    sAjaxSource: $('#products').data('source')
  })



$(document).ready(function() {
    $('#example').DataTable();
} );

$('#tags-table').dataTable({
    sPaginationType: "full_numbers",
    bJQueryUI: true,
    bProcessing: true,
    bServerSide: true,
    aoColumnDefs: [
      { "targets": [0], "searchable": true, "orderable": false, "visible": true, name: 'name' },
      { "targets": [1], "searchable": true, "orderable": false, "visible": true, name: 'description' },
      { "targets": [2], "searchable": true, "orderable": false, "visible": true, name: 'created_at' }
    ],
    sAjaxSource: $('#products').data('source')
  })

  var original_text = $("#original_text");
  var counter     = $("#counter");
  var max_length  = counter.data("maximum-length");
  
  if ( original_text.length ) {
    
    counter.text(original_text.val().length);
    original_text.keyup(function() {
      counter.text($(this).val().length);
    });
    $('#char_count').html($('#original_text').val().length);
    $('#char_count').html(Math.floor(($(this).val().length/70)))

  }

 
      
  // 'bJQueryUI': true,
  //     "processing": false,
  //     "bServerSide": true,
  //     "pageLength": 25,
  //     "columnDefs": [
  //       { "targets": [0], "searchable": true, "orderable": true, "visible": true },
  //       { "targets": [1], "searchable": true, "orderable": true, "visible": true },
  //       { "targets": [2], "searchable": true, "orderable": true, "visible": true },
  //       { "targets": [3], "searchable": true, "orderable": true, "visible": true },
  //       { "targets": [4], "searchable": true, "orderable": true, "visible": true },
  //       { "targets": [5], "searchable": true, "orderable": false, "visible": true },
  //       { "targets": [6], "searchable": false, "orderable": false, "visible": true },
  //       { "targets": [7], "searchable": false, "orderable": false, "visible": true },
  //     ],
  //     "ajax": company_usersUrl

})

